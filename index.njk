---
layout: layouts/telesthesia-base.njk
---

<button id="myButton">click</button>

<div class="main-nav">
    <a href="/map">
        <div class="main-nav__item">
            <h2><span>Map</span></h2>
            <p>Click on the map to see the thing</p>
        </div>
    </a>

    <a href="/viewings">
        <div class="main-nav__item">
            <h2><span>Viewings</span></h2>
            <p>Read the viewings</p>
        </div>
    </a>

    <a href="/statistics">
        <div class="main-nav__item">
            <h2><span>Statistics</span></h2>
            <p>See the stats</p>
        </div>
    </a>


    </div>

    <script>
// Function to call the Netlify function
async function callNetlifyFunction() {
  try {
    let headers = {};
    const sessionId = localStorage.getItem('sessionId');
    if (sessionId) {
      headers['X-Session-ID'] = sessionId;
    }

    const response = await fetch('/.netlify/functions/sessions', {
      headers: headers,
    });
    const data = await response.json();
    console.log(data);

    // Store the sessionId in localStorage if it exists in the response
    if (data.sessionId) {
      localStorage.setItem('sessionId', data.sessionId);
    }

    // Handle the response data
    // ...
  } catch (error) {
    console.error(error);
    // Handle the error
    // ...
  }
}

// Add event listener to a button element
const button = document.getElementById('myButton');
button.addEventListener('click', callNetlifyFunction);

    </script>